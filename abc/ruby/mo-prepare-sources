#!/usr/bin/ruby -Ku
# by Hiromasa YOSHIMOTO <y@momonga-linux.org>

require 'optparse'
$:.unshift(File.dirname($0))

OPTS = {}
Version = "0.0.1"
require 'lib/config.rb'
require 'lib/prepare.rb'

OPTS[:verbose] = 10
OPTS[:debug]   = true

opt = OptionParser.new
opt.on('-q', '--quite', 'suppress verbose msg.') {|v| OPTS[:verbose]=-1 }
opt.on('-v', '--verbose', 'verbose msg.') {|v| OPTS[:verbose]+=1 }
opt.parse!(ARGV)

requested = ARGV 
requested.map!{|v| v.chomp("/") }

requested.each {|specdir|
  job = Job.new("#{specdir}/#{specdir}.spec", nil, OPTS)

  next if ! job.valid

  job.prepare_sources
}

# Local Variables:
# mode: ruby
# indent-tabs-mode: nil
# End:
